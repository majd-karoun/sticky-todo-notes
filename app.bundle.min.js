(()=>{var Ft=Object.defineProperty;var ot=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable;var nt=(e,t,o)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,st=(e,t)=>{for(var o in t||(t={}))Wt.call(t,o)&&nt(e,o,t[o]);if(ot)for(var o of ot(t))Kt.call(t,o)&&nt(e,o,t[o]);return e};const N=new Map;typeof window!="undefined"&&(window.domCache=N);const i=(e,t=!1)=>{const o=[".board.active",".board[data-board-id=",".sticky-note",".board-title-circle",".emoji-sticker",".color-palette",".deleted-note",".board-button"],n=[`.board[data-board-id="${m||1}"]`,".board.active"],s=o.some(r=>e.includes(r)),a=n.some(r=>e===r);if(s||a||t){const r=document.querySelector(e);return a&&!s&&N.set(e,r),r}if(!N.has(e)){const r=document.querySelector(e);return N.set(e,r),r}return N.get(e)},w=(e,t=!1)=>{if([".board",".board-button",".sticky-note",".board-title-circle",".emoji-sticker",".color-palette",".deleted-note",".emoji-item",".sticky-note.selected",".board.active",".board-pattern-option",".board-color-option",".color-option"].some(r=>e.includes(r))||t)return Array.from(document.querySelectorAll(e));const s=`all:${e}`;if(!N.has(s)){const r=Array.from(document.querySelectorAll(e));return N.set(s,r),r}const a=N.get(s);return Array.isArray(a)?[...a]:Array.from(document.querySelectorAll(e))},te=(e,t)=>{if(!e)return null;const o=`${e.className||"element"}:${t}`;if(!N.has(o)){const n=e.querySelector(t);return N.set(o,n),n}return N.get(o)},Zt={get boardsContainer(){return i(".boards-container")},get activeBoard(){return i(".board.active")},get currentBoard(){const e=typeof window!="undefined"&&window.currentBoardId||1;return i(`.board[data-board-id="${e}"]`)},get boardsNavigation(){return i(".boards-navigation")},get addBoardButton(){return i(".add-board-button")},get noteInput(){return i(".note-input textarea")},get textareaContainer(){return i(".textarea-container")},get boardStyleMenu(){return i(".board-style-menu")},get boardStyleButton(){return i(".board-style-button")},get shortcutHint(){return i(".shortcut-hint")},get shortcutIcon(){return i("#shortcutIcon")},get trashBin(){return i(".trash-bin")},get trashModal(){return i("#trashModal")},get trashCount(){return i(".trash-count")},get deletedNotesContainer(){return i(".deleted-notes-container")},get clearTrashBtn(){return i(".clear-trash-btn")},get dragTransferMessage(){return i("#dragTransferMessage")},get noteLimitMessage(){return i("#noteLimitMessage")},get statusBar(){return i(".status-bar")},get emojiPicker(){return i(".emoji-picker")},get allBoards(){return w(".board",!0)},get allBoardButtons(){return w(".board-button",!0)},get activeBoardNotes(){const e=this.currentBoard;return e?Array.from(e.querySelectorAll(".sticky-note")):[]},get selectedNotes(){return w(".sticky-note.selected",!0)},get colorPalettes(){return w(".color-palette",!0)}},Jt=(e=null)=>{if(!e){N.clear();return}(Array.isArray(e)?e:[e]).forEach(o=>{N.delete(o),N.delete(`all:${o}`)})},ft=()=>{[".board",".board-button",".sticky-note",".color-palette",".board-title-input",".board.active"].forEach(t=>{N.delete(t),N.delete(`all:${t}`)});for(let t=1;t<=9;t++)N.delete(`.board[data-board-id="${t}"]`)};typeof window!="undefined"&&(window.$=i,window.$$=w,window.$within=te,window.DOM=Zt,window.clearCache=Jt,window.refreshDynamicCache=ft);let je=null;const at=()=>{if(je)return;je=new MutationObserver(t=>{let o=!1;t.forEach(n=>{var s,a,r;n.type==="childList"&&((s=n.target.classList)!=null&&s.contains("boards-container")||(a=n.target.classList)!=null&&a.contains("board")||(r=n.target.classList)!=null&&r.contains("boards-navigation"))&&(o=!0)}),o&&ft()});const e=i(".boards-container");e&&je.observe(e,{childList:!0,subtree:!0})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",at):setTimeout(at,0);class Vt{constructor(){this.pendingUpdates=new Map,this.rafId=null,this.isProcessing=!1}batchUpdate(t,o,n="normal"){if(!t||!o)return;const s=this.getElementId(t);this.pendingUpdates.has(s)||this.pendingUpdates.set(s,{element:t,styles:{},priority:n,transforms:{}});const a=this.pendingUpdates.get(s);Object.entries(o).forEach(([r,c])=>{r==="transform"||r.startsWith("transform")?a.transforms[r]=c:a.styles[r]=c}),this.getPriorityLevel(n)>this.getPriorityLevel(a.priority)&&(a.priority=n),this.scheduleFlush()}batchTransform(t,o,n,s={}){const a=st({transform:`translate(${o}px, ${n}px)`},s);this.batchUpdate(t,a,"high")}batchMultiple(t){t.forEach(({element:o,styles:n,priority:s})=>{this.batchUpdate(o,n,s)})}scheduleFlush(){this.rafId||this.isProcessing||(this.rafId=requestAnimationFrame(()=>{this.flush()}))}flush(){if(!this.isProcessing){this.isProcessing=!0,this.rafId=null;try{Array.from(this.pendingUpdates.values()).sort((o,n)=>this.getPriorityLevel(n.priority)-this.getPriorityLevel(o.priority)).forEach(({element:o,styles:n,transforms:s})=>{o.isConnected&&(Object.entries(n).forEach(([a,r])=>{o.style[a]=r}),Object.entries(s).forEach(([a,r])=>{o.style[a]=r}))}),this.pendingUpdates.clear()}catch(t){console.warn("Animation batch flush error:",t)}finally{this.isProcessing=!1}}}forceFlush(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.flush()}clearElement(t){const o=this.getElementId(t);this.pendingUpdates.delete(o)}clearAll(){this.pendingUpdates.clear(),this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null)}getElementId(t){return t._batcherId||(t._batcherId=`element_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),t._batcherId}getPriorityLevel(t){switch(t){case"high":return 3;case"normal":return 2;case"low":return 1;default:return 2}}getStats(){return{pendingUpdates:this.pendingUpdates.size,isProcessing:this.isProcessing,hasScheduledFlush:!!this.rafId}}}window.animationBatcher=new Vt;const ue={updatePosition(e,t,o){window.animationBatcher.batchUpdate(e,{left:`${t}px`,top:`${o}px`},"high")},updateSize(e,t,o){window.animationBatcher.batchUpdate(e,{width:`${t}px`,height:`${o}px`},"high")},updateOpacity(e,t){window.animationBatcher.batchUpdate(e,{opacity:t.toString()},"normal")},updateZIndex(e,t){window.animationBatcher.batchUpdate(e,{zIndex:t.toString()},"low")},updateStyles(e,t,o="normal"){window.animationBatcher.batchUpdate(e,t,o)}};window.AnimationUtils=ue;class Gt{constructor(){this.pendingSaves=new Map,this.debounceTimers=new Map,this.defaultDelay=300,this.isProcessing=!1}debounceSave(t,o,n=this.defaultDelay,s="normal"){if(s==="immediate"){this.saveImmediately(t,o);return}this.pendingSaves.set(t,{data:o,priority:s,timestamp:Date.now()}),this.debounceTimers.has(t)&&clearTimeout(this.debounceTimers.get(t));const a=setTimeout(()=>{this.executeSave(t)},n);this.debounceTimers.set(t,a)}saveImmediately(t,o){try{const n=typeof o=="string"?o:JSON.stringify(o);localStorage.setItem(t,n),this.pendingSaves.delete(t),this.debounceTimers.has(t)&&(clearTimeout(this.debounceTimers.get(t)),this.debounceTimers.delete(t))}catch(n){console.warn(`Failed to save to localStorage (key: ${t}):`,n)}}executeSave(t){if(!this.pendingSaves.has(t))return;const{data:o}=this.pendingSaves.get(t);this.saveImmediately(t,o)}flushAll(){this.debounceTimers.forEach(t=>clearTimeout(t)),this.debounceTimers.clear(),this.pendingSaves.forEach(({data:t},o)=>{try{const n=typeof t=="string"?t:JSON.stringify(t);localStorage.setItem(o,n)}catch(n){console.warn(`Failed to flush localStorage (key: ${o}):`,n)}}),this.pendingSaves.clear()}cancelSave(t){this.debounceTimers.has(t)&&(clearTimeout(this.debounceTimers.get(t)),this.debounceTimers.delete(t)),this.pendingSaves.delete(t)}getStatus(){return{pendingSaves:Array.from(this.pendingSaves.keys()),activeTimers:this.debounceTimers.size,isProcessing:this.isProcessing}}clear(){this.debounceTimers.forEach(t=>clearTimeout(t)),this.debounceTimers.clear(),this.pendingSaves.clear()}}window.storageDebouncer=new Gt;const Qt={save(e,t,o=300){window.storageDebouncer.debounceSave(e,t,o,"normal")},saveImmediate(e,t){window.storageDebouncer.saveImmediately(e,t)},saveHigh(e,t){window.storageDebouncer.debounceSave(e,t,100,"high")},saveLow(e,t){window.storageDebouncer.debounceSave(e,t,1e3,"low")},load(e,t=null){try{const o=localStorage.getItem(e);if(o===null)return t;try{return JSON.parse(o)}catch(n){return o}}catch(o){return console.warn(`Failed to load from localStorage (key: ${e}):`,o),t}},remove(e){window.storageDebouncer.cancelSave(e);try{localStorage.removeItem(e)}catch(t){console.warn(`Failed to remove from localStorage (key: ${e}):`,t)}},flush(){window.storageDebouncer.flushAll()}};window.DebouncedStorage=Qt;window.addEventListener("beforeunload",()=>{window.storageDebouncer.flushAll()});document.addEventListener("visibilitychange",()=>{document.hidden&&window.storageDebouncer.flushAll()});const pe=["#f0e68c","#98ff98","#ff7eb9","#7afcff","#FE8801","#ec0c39","#AF65EF","#ffd700","#C1C1C1","#FFFFFF"],M={colors:{default:"#1a1a1a",current:"#1a1a1a",available:["#1a1a1a","#500000","#004000","#000050","#10253F","#400040"]},patterns:{default:"none",current:"none"}};let A=[];let ht=null,gt=null;let ce=null;let C=[],eo=!1;let ee=[];const oe={},ne={},z={};let re=1e3;oe[1]={x:window.innerWidth/2-100,y:window.innerHeight/2-75};ne[1]=pe[0];let m=1,T=1;const ye=9,B="stickyNotes_active",Se="stickyNotes_deleted",pt="stickyNotes_boardCount",yt="stickyNotes_zIndexes",b=e=>parseInt(String(e).replace("px",""))||0,He=(e,t,o=150)=>{const n=i(`.board[data-board-id="${m}"]`);if(!n)return!1;const s=Array.from(n.querySelectorAll(".sticky-note")),a=20;for(const r of s){const c=b(r.style.left),l=b(r.style.top),f=b(r.style.width)||200,d=e<c+f+a&&e+200>c-a,p=t+o,u=l+30,g=t<u&&p>l-a;if(d&&g)return!0}return!1},rt=(e,t)=>{const o=Math.random()*10-5;let n=e+o,s=t+70;const a=5,r=window.innerWidth-200,c=window.innerHeight-300,l=20;let f=0;for(;f<l&&He(n,s);)s+=40,f++,f>10&&(n=e+250,s=50,f=0);if(s>c){for(s=50,n=e+250;f<l&&He(n,s);)s+=40,f++;if(n>r)for(n=a+50,s=50,f=0;f<l&&He(n,s);)s+=40,f++}const d=Math.min(Math.max(n,a),r),p=Math.min(Math.max(s,a),window.innerHeight-100);return{x:d,y:p}},to=e=>{if(e.startsWith("rgba")){const o=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return o?{r:parseInt(o[1]),g:parseInt(o[2]),b:parseInt(o[3])}:null}e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(o,n,s,a)=>n+n+s+s+a+a);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null};const he=(e=!1)=>{e?window.DebouncedStorage.saveImmediate(`${B}_board_${m}`,W()):window.DebouncedStorage.save(`${B}_board_${m}`,W()),typeof K=="function"&&K()},W=()=>{const e=i(`.board[data-board-id="${m}"]`);if(!e)return[];const t=Array.from(e.querySelectorAll(".sticky-note"));return Array.from(t).map(o=>({content:te(o,".sticky-content").textContent,x:b(o.style.left),y:b(o.style.top),color:o.style.backgroundColor||"#ffeb3b",width:o.style.width||"200px",height:o.style.height||"150px",isBold:te(o,".sticky-content").classList.contains("bold"),noteId:o.dataset.noteId,zIndex:o.style.zIndex||1}))};const bt=()=>{window.DebouncedStorage.save(pt,T.toString())},vt=()=>{const e={color:M.colors.current,pattern:M.patterns.current};window.DebouncedStorage.saveLow(`boardStyles_board_${m}`,e)},wt=()=>{const e=i("#shortcutIcon");if(!e)return;const t=navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318":"Ctrl";e.innerHTML=t,e.className="shortcut-icon focus-hint"},St=()=>{const e=i(".note-input textarea");if(!e)return;const t=i("#shortcutIcon"),o=()=>{if(!t)return;const n=navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318":"Ctrl",s=e.value.trim();t.innerHTML=s?`${n}+\u21B5`:n,t.classList.toggle("focus-hint",!s),t.classList.toggle("enter-hint",s)};e.addEventListener("focus",()=>{o(),e.style.height="50px",requestAnimationFrame(()=>e.style.height="200px"),e.addEventListener("input",o)}),e.addEventListener("blur",()=>{wt(),e.style.height="200px",requestAnimationFrame(()=>e.style.height="50px"),e.removeEventListener("input",o)}),document.addEventListener("mousedown",n=>{!n.target.closest(".note-input")&&document.activeElement===e&&e.blur()})},it=(e,t=null)=>{try{return JSON.parse(e)}catch(o){return console.error("Failed to parse JSON data:",o),t}},oo=()=>{const e="stickyNotes_storageCleanupPerformed";if(!localStorage.getItem(e))try{const t=[];for(let o=0;o<localStorage.length;o++){const n=localStorage.key(o);n&&(n.startsWith("stickyNotes_deleted")||n.startsWith("stickyNotes_zIndexes")||n.startsWith("boardColor_")||n.startsWith("boardPattern_")||n.startsWith("boardStyles_")||n.startsWith("emojiStickers_")||n.startsWith("daysPatternStartDate_")||n.startsWith("emojiUsageOrder"))&&t.push(n)}t.forEach(o=>{localStorage.removeItem(o)}),localStorage.setItem(e,"true")}catch(t){console.error("Error during localStorage cleanup:",t),localStorage.setItem(e,"true")}},Et=()=>{try{if(typeof ke!="function"){setTimeout(Et,50);return}window.DebouncedStorage.flush(),oo(),typeof ct=="function"&&ct();const e=localStorage.getItem(pt);if(e){const o=parseInt(e);if(!isNaN(o)&&o>0){T=Math.min(o,ye);for(let n=2;n<=T;n++)typeof Xe=="function"&&Xe(n)}}typeof $e=="function"&&$e();for(let o=1;o<=T;o++){const n=localStorage.getItem(`${B}_board_${o}`);if(n){const s=it(n,[]);Array.isArray(s)&&s.forEach(a=>{if(a&&typeof a=="object"&&(a.text||a.content)){oe[o]={x:b(a.x),y:b(a.y)},ne[o]=a.color||pe[0];const r=a.text||a.content,c=ke(r,a.color||pe[0],b(a.x),b(a.y),!0,a.width||"200px",a.height||"150px",a.isBold||!1,o);c&&a.noteId&&(c.dataset.noteId=a.noteId,z[a.noteId]?(c.style.zIndex=z[a.noteId],z[a.noteId]>re&&(re=z[a.noteId])):a.zIndex&&!isNaN(parseInt(a.zIndex))&&(c.style.zIndex=a.zIndex,z[a.noteId]=parseInt(a.zIndex),parseInt(a.zIndex)>re&&(re=parseInt(a.zIndex))))}})}typeof we=="function"&&we(o)}typeof F=="function"&&F(1);const t=localStorage.getItem(Se);if(t){const o=it(t,[]);Array.isArray(o)&&(A=o,typeof me=="function"&&me())}["updateBoardIndicators","updateShortcutHintVisibility"].forEach(o=>{typeof window[o]=="function"&&window[o]()}),wt(),St()}catch(e){console.error("Critical error loading saved data:",e)}},ie=()=>++re,no=e=>{e.style.zIndex=ie();const t=e.dataset.noteId;t&&(z[t]=re,Lt())},Lt=()=>{try{window.DebouncedStorage.saveLow(yt,z)}catch(e){console.error("Error saving note z-indexes:",e)}},so=()=>{try{const e=localStorage.getItem(yt);e&&(Object.assign(z,JSON.parse(e)),re=Math.max(1e3,...Object.values(z)))}catch(e){console.error("Error loading note z-indexes:",e)}};const ct=()=>{ce=Object.assign(document.createElement("div"),{className:"selection-box"}),Object.assign(ce.style,{display:"none"}),document.body.appendChild(ce)};function ao(){const e=i(".boards-container"),t=o=>{o.target.closest(".board")&&!o.target.closest(".sticky-note, .note-input, .boards-navigation, .trash-bin, .board-style-button")&&o.preventDefault()};document.addEventListener("mousedown",t),e.addEventListener("mousedown",ro),document.addEventListener("mousemove",io),document.addEventListener("mouseup",co)}function ro(e){if(e.target.closest(".sticky-note, .note-input, .trash-bin, .boards-navigation, .board-style-button, .emoji-sticker"))return;e.preventDefault();const t=i(".note-input textarea");t&&document.activeElement===t&&t.blur(),!e.shiftKey&&Ne(),window.isSelecting=!0,window.selectionStartX=e.clientX,window.selectionStartY=e.clientY,document.body.classList.add("selecting"),ce.style.cssText=`left:${window.selectionStartX}px; top:${window.selectionStartY}px; width:0; height:0; display:block;`}function io(e){if(!window.isSelecting)return;e.preventDefault();const t=window.selectionStartX,o=window.selectionStartY,n=e.clientX,s=e.clientY;ue.updateStyles(ce,{left:`${Math.min(t,n)}px`,top:`${Math.min(o,s)}px`,width:`${Math.abs(n-t)}px`,height:`${Math.abs(s-o)}px`},"high"),lo()}const co=e=>{window.isSelecting&&(window.isSelecting=!1,document.body.classList.remove("selecting"),ce.style.display="none")};function lo(){const e=ce.getBoundingClientRect(),t=i(`.board[data-board-id="${m}"]`);if(!t)return;const o=(n,s,a)=>{const r=n.getBoundingClientRect(),c=!(r.right<e.left||r.left>e.right||r.bottom<e.top||r.top>e.bottom),l=s.indexOf(n);c?l===-1&&(s.push(n),n.classList.add(a)):!eo&&l!==-1&&(s.splice(l,1),n.classList.remove(a))};Array.from(t.querySelectorAll(".sticky-note")).forEach(n=>o(n,C,"selected"))}const Ne=()=>{C.forEach(e=>e.classList.remove("selected")),C=[]};function uo(e){window.isMovingSelection=!0,window.selectionMoveStartX=e.clientX,window.selectionMoveStartY=e.clientY,document.body.classList.add("selecting"),ee=C.map(t=>({element:t,x:b(t.style.left),y:b(t.style.top),type:"note"})),document.addEventListener("mousemove",xt),document.addEventListener("mouseup",kt)}function xt(e){if(!window.isMovingSelection)return;const[t,o]=[e.clientX-window.selectionMoveStartX,e.clientY-window.selectionMoveStartY],[n,s,a]=[5,-5,-5],[r,c]=[window.innerWidth-n,window.innerHeight-n];(f=>f.forEach(d=>{const[p,u]=[Math.min(Math.max(d.x+t,s),r-d.element.offsetWidth/4),Math.min(Math.max(d.y+o,a),c-d.element.offsetHeight/4)];ue.updatePosition(d.element,p,u)}))(ee),C.length>0&&(Nt(e.clientX,e.clientY),C.length>1&&Ke())}function kt(e){if(!window.isMovingSelection)return;if(window.isMovingSelection=!1,document.body.classList.remove("selecting"),document.removeEventListener("mousemove",xt),document.removeEventListener("mouseup",kt),Be(),!Dt().moved){he();for(let o=C.length-1;o>=0;o--)Ct(C[o])&&C.splice(o,1)}Bt()}let ge=[];const mo=100,lt=50,fo="#ffd700",ho=()=>{const[e,t]=[i("#trashModal"),i(".clear-trash-btn")];e&&!e.classList.contains("visible")&&(e.style.display="block",e.classList.add("visible"),requestAnimationFrame(()=>Me())),t&&(t.classList.add("shake-animation"),setTimeout(()=>t.classList.remove("shake-animation"),1e3))},qe=e=>{C.includes(e)&&C.length>1?(C.forEach((t,o)=>setTimeout(()=>Re(t),o*100)),Ne()):Re(e)},Re=e=>{if(A.length>=mo){!ge.includes(e)&&ge.push(e),ho();return}e._eventCleanup&&e._eventCleanup();const t=te(e,".sticky-content"),o={text:t.innerHTML,color:e.style.backgroundColor,x:e.style.left,y:e.style.top,width:e.style.width,height:e.style.height,timestamp:new Date().toLocaleString(),isBold:t.classList.contains("bold")};go(e),A.unshift(o),window.DebouncedStorage.saveLow(Se,A),me(),po(e)},go=e=>{if(!window.noteColumns)return;const t=e.closest(".board");if(!t||!t.matches(".board-pattern-weekdays, .board-pattern-days"))return;const[o,n]=[t.getBoundingClientRect(),e.getBoundingClientRect()],s=Math.min(5,Math.max(0,Math.floor((n.left+n.width/2-o.left)/(o.width/6))));window.noteColumns[s]&&(window.noteColumns[s]=window.noteColumns[s].filter(a=>Math.abs(a.x-b(e.style.left))>1||Math.abs(a.y-b(e.style.top))>1))},po=e=>{const t=i(".trash-bin"),o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=o.left-n.left+o.width/2-n.width/2,a=o.top-n.top;e.style.setProperty("--throwX",`${s}px`),e.style.setProperty("--throwY",`${a}px`),e.style.animation="paperCrumble 0.6s ease-in forwards",t.style.animation="binShake 0.6s ease-in-out",setTimeout(()=>{e.remove(),t.style.animation="",he(),K()},600)},Ct=e=>{const[t,o]=[i(".trash-bin").getBoundingClientRect(),e.getBoundingClientRect()];return o.right>t.left&&o.left<t.right&&o.bottom>t.top&&o.top<t.bottom?(qe(e),!0):!1},be=()=>{const e=document.getElementById("trashModal");e.classList.toggle("visible")?(e.style.display="block",requestAnimationFrame(()=>Me())):setTimeout(()=>e.style.display="none",300)},Me=()=>{const e=i(".deleted-notes-container");e.style.minHeight="200px",e.innerHTML=A.length?A.map((t,o)=>`
            <div class="deleted-note" style="background-color: ${t.color||fo}">
                <div class="deleted-note-content ${t.isBold?"bold":""}">${t.text}</div>
                <div class="deleted-note-actions">
                    <button class="restore-btn" onclick="restoreNote(${o})">Restore</button>
                </div>
            </div>`).join(""):'<div class="empty-state">(Empty)</div>'},yo=e=>{const t=w(".deleted-note")[e];t==null||t.classList.add("shrinking"),setTimeout(()=>{const[o]=A.splice(e,1);ke(o.text,o.color,b(o.x),b(o.y),!0,o.width,o.height,o.isBold),window.DebouncedStorage.saveLow(Se,A),me(),Me(),window.DebouncedStorage.saveHigh(`${B}_board_${m}`,W()),K()},300)},Tt=()=>{if(A.length===0){be();return}const e=[...w(".deleted-note")].slice(0,6);e.forEach((t,o)=>{t.classList.add("note-deleting"),t.style.animationDelay=`${o*lt}ms`}),setTimeout(()=>{A=[],window.DebouncedStorage.saveLow(Se,A),me(),Me(),setTimeout(()=>{if(be(),ge.length){const t=[...ge];ge=[],setTimeout(()=>{t.forEach(o=>{o!=null&&o.parentNode&&Re(o)})},300)}},200)},(e.length?(e.length-1)*lt+300:0)+100)},me=()=>{i(".trash-count").textContent=A.length};document.addEventListener("click",e=>{const t=i("#trashModal");t!=null&&t.classList.contains("visible")&&e.target===t&&be()});let ze=new Set;const Fe=()=>`note_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,bo=()=>Math.random()*40-20,vo=(e=De())=>e.getDay()===0?0:e.getDay()-1;function Oe(e){const t=document.getElementById("noteLimitMessage"),o=t==null?void 0:t.querySelector(".transfer-text");o&&(o.textContent=e),t&&(t.classList.add("visible"),setTimeout(()=>t.classList.remove("visible"),3e3))}function We(){const e=i(".note-input textarea"),t=e.value.trim();if(!t)return;const o=i(`.board[data-board-id="${m}"]`),n=Array.from(o.querySelectorAll(".sticky-note")),[s,a,r]=[o.classList.contains("board-pattern-weekdays"),o.classList.contains("board-pattern-days"),n.filter(y=>!y.dataset.transferred).length===0];if(!s&&!a&&n.length>=30){Oe("Maximum notes space reached.");return}const c=n.filter(y=>!y.dataset.transferred),l=c[c.length-1];let{x:f,y:d}=oe[m]||{x:0,y:0},p=ne[m]||getRandomColor(),u,g;const S=(y,E,R=null)=>{const $=o.offsetWidth/E,j=y*$+10,Z=(y+1)*$-210,J=Math.max(j,Math.min(Z,j+bo())),H=Array.from(o.querySelectorAll(".sticky-note")).filter(D=>D.style.display!=="none"&&D!==R),[O,G]=[y*$,(y+1)*$],P=H.filter(D=>{const[X,Q]=[b(D.style.left),b(D.style.left)+200],[se,le]=[Math.max(X,O),Math.min(Q,G)];return Math.max(0,le-se)/200>.5});return{positionX:J,columnNotes:P}},x=(y,E)=>{const R=window.innerHeight-300;for(let $=0;$<E;$++){const j=(y+$)%E,{positionX:Z,columnNotes:J}=S(j,E);let H=0,O=null;J.forEach(P=>{const D=b(P.style.top);D>H&&(H=D,O=P)});const G=O?H+70:60;if(G<=R)return u=Z,g=G,O&&(p=O.style.backgroundColor),!0}return Oe("Maximum notes space reached."),!1},Y=y=>{let E;const R=y?6:5;if(l){const $=b(l.style.left),j=o.offsetWidth/R;E=Math.floor($/j),E=Math.max(0,Math.min(E,R-1))}else E=y?vo():Je(m)||0;return x(E,R)};if(r)if(s||a){if(Y(s)===!1)return}else{const y=Math.max(150,window.innerWidth/4);({x:u,y:g}=rt(y,50-70))}else if(s||a){if(Y(s)===!1)return}else if(l&&([f,d,p]=[b(l.style.left),b(l.style.top),l.style.backgroundColor]),{x:u,y:g}=rt(f,d),g<=50){const y=n.filter(E=>Math.abs(b(E.style.left)-u)<150);if(y.length>0){const E=y.map(H=>b(H.style.top)),[R,$]=[Math.max(...E),Math.min(...E)],j=window.innerHeight-300,[Z,J]=[R+200,$-200];if(Z<=j)g=Z;else if(J>=50)g=J;else{const H=(G,P)=>{const D=window.innerWidth-200;for(let X=G;P>0?X<=D:X>=55;X+=P*250){const Q=n.filter(ae=>Math.abs(b(ae.style.left)-X)<150);if(Q.length===0)return{x:X,y:50};const se=Q.map(ae=>b(ae.style.top)),[le,Ee]=[Math.max(...se),Math.min(...se)],[fe,Le]=[le+200,Ee-200];if(fe<=j)return{x:X,y:fe};if(Le>=50)return{x:X,y:Le}}return null},O=H(u+250,1)||H(u-250,-1);if(O)[u,g]=[O.x,O.y];else{Oe("Maximum notes space reached.");return}}}}ke(t.replace(/\n/g,"<br>"),p,u,g,!1,"200px","150px",!1,m),[oe[m],ne[m],e.value]=[{x:u,y:g},p,""],o.querySelectorAll('.sticky-note[data-transferred="true"]').forEach(y=>{delete y.dataset.transferred}),window.DebouncedStorage.saveHigh(`${B}_board_${m}`,W()),K()}function ke(e,t,o,n,s=!1,a="200px",r="150px",c=!1,l=m,f=!1){const[d,p]=[document.createElement("div"),Fe()];Object.assign(d,{className:"sticky-note",innerHTML:`<div class="sticky-content ${c?"bold":""}" contenteditable="true">${e}</div>
        <div class="note-controls">
            <div class="color-button" style="background-color: ${t}">
                <div class="color-palette">${pe.map(y=>`<div class="color-option" style="background-color: ${y}" onclick="changeNoteColor(this, '${y}')"></div>`).join("")}</div>
            </div>
            <button class="bold-toggle ${c?"active":""}" onclick="toggleBold(this)">B</button>
            <button class="done-button" onclick="markAsDone(this.closest('.sticky-note'))">\u2713</button>
        </div>
        <div class="resize-handle"></div>`});let u;const g=i(`.board[data-board-id="${l}"]`),S=g&&(g.classList.contains("board-pattern-weekdays")||g.classList.contains("board-pattern-days"));u=ie(),d.style.cssText=`background-color:${t}; left:${o}px; top:${n}px; width:${a}; height:${r}; z-index:${u};`,d.dataset.noteId=p,f&&(d.dataset.repositioned="true",ze.add(p)),z[p]=u,Lt();const x=y=>{y.target.closest('.note-controls, .sticky-content[contenteditable="true"]')||no(d)};d.addEventListener("click",x),d._eventCleanup=()=>{d.removeEventListener("click",x)},xo(d);const Y=i(`.board[data-board-id="${l}"]`);return Y?(Y.appendChild(d),d.style.animation="paperPop 0.3s ease-out forwards",s||window.DebouncedStorage.saveHigh(`${B}_board_${m}`,W()),d):(console.error(`Board element with ID ${l} not found.`),null)}function wo(e,t){event.stopPropagation();const o=e.closest(".sticky-note");(o.classList.contains("selected")?w(".sticky-note.selected"):[o]).forEach(s=>{const a=s.querySelector(".color-button");[s,a].forEach(r=>r.classList.add("color-transition")),[s.style.backgroundColor,a.style.backgroundColor]=[t,t],setTimeout(()=>[s,a].forEach(r=>r.classList.remove("color-transition")),300)}),ne[m]=t,window.DebouncedStorage.saveHigh(`${B}_board_${m}`,W())}const $t=e=>{e.closest(".sticky-note").querySelector(".sticky-content").classList.toggle("bold"),e.classList.toggle("active"),window.DebouncedStorage.saveLow(`${B}_board_${m}`,W())},So=i("#shortcutIcon")||i(".textarea-container").appendChild(Object.assign(document.createElement("div"),{className:"shortcut-icon",id:"shortcutIcon"})),It=()=>{So.textContent=navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318":"Ctrl"};It();i(".note-input textarea").addEventListener("keydown",e=>{e.key==="Enter"&&(e.shiftKey||e.metaKey||e.ctrlKey)&&(e.preventDefault(),We())});let I=null,ve=!1,Ye=!1;let dt=!1;const Eo=e=>{window.activeNote&&window.activeNote._moveHandler&&window.activeNote._moveHandler(e)},Lo=e=>{window.activeNote&&window.activeNote._endHandler&&(window.activeNote._endHandler(e),window.activeNote=null)};dt||(document.addEventListener("mousemove",Eo),document.addEventListener("mouseup",Lo),dt=!0);function xo(e){let t=!1,o=!1,n=!1,s,a,r,c,l,f,d;const[p,u,g]=[".color-button",".color-palette",".sticky-content"].map(h=>e.querySelector(h)),S=()=>he(),x=[],Y=()=>he(),y=()=>he();g.addEventListener("blur",Y),g.addEventListener("input",y),x.push({element:g,event:"blur",handler:Y},{element:g,event:"input",handler:y});const E=h=>{n&&!g.contains(h.target)&&([n,g.contentEditable]=[!1,"false"],g.blur(),document.removeEventListener("click",E))},R=h=>{[n,g.contentEditable]=[!0,"true"],setTimeout(()=>{const[L,v]=[document.createRange(),window.getSelection()];if(document.caretRangeFromPoint){const k=document.caretRangeFromPoint(h.clientX,h.clientY);k&&(v.removeAllRanges(),v.addRange(k))}else if(document.caretPositionFromPoint){const k=document.caretPositionFromPoint(h.clientX,h.clientY);k&&(L.setStart(k.offsetNode,k.offset),L.collapse(!0),v.removeAllRanges(),v.addRange(L))}g.focus()},0),setTimeout(()=>{document.addEventListener("click",E)},0),h.stopPropagation()};g.addEventListener("dblclick",R),x.push({element:g,event:"dblclick",handler:R});let $=null,j=!1;const Z=()=>{!t&&!o&&(j=!0,$=e.style.zIndex||"1",ue.updateZIndex(e,ie()))},J=()=>{!t&&!o&&$!==null&&(j=!1,ue.updateZIndex(e,ie()),$=null)};e.addEventListener("mouseenter",Z),e.addEventListener("mouseleave",J),x.push({element:e,event:"mouseenter",handler:Z},{element:e,event:"mouseleave",handler:J});const H=()=>g.contentEditable="false",O=h=>{if(h.key==="Enter")if(h.preventDefault(),h.shiftKey)g.contentEditable="false",S();else{const[L,v]=[window.getSelection(),window.getSelection().getRangeAt(0)],k=Object.assign(document.createElement("span"),{innerHTML:"<br>",style:{fontFamily:"'Comic Neue', cursive"}});v.deleteContents(),v.insertNode(k),v.setStartAfter(k),v.collapse(!0),L.removeAllRanges(),L.addRange(v)}};g.addEventListener("blur",H),g.addEventListener("keydown",O),x.push({element:g,event:"blur",handler:H},{element:g,event:"keydown",handler:O});const G=()=>{const h=e.getBoundingClientRect();oe[m]={x:h.left,y:h.top}};let P=null;const D=h=>{const[L,v]=[h.clientX,h.clientY];if(!u.classList.contains("visible"))return;const[k,V]=[u.getBoundingClientRect(),p.getBoundingClientRect()],[de,_e]=[L>=k.left-20&&L<=k.right+20&&v>=k.top-20&&v<=k.bottom+20,L>=V.left&&L<=V.right&&v>=V.top&&v<=V.bottom];de||_e?clearTimeout(P):Q()};document.addEventListener("mousemove",D);const X=()=>{clearTimeout(P),u.classList.remove("closing"),u.classList.add("visible"),w(".color-palette").forEach(h=>{h!==u&&(h.classList.add("closing"),setTimeout(()=>h.classList.remove("visible","closing"),180))})},Q=()=>{clearTimeout(P),P=setTimeout(()=>{u.classList.add("closing"),setTimeout(()=>u.classList.contains("closing")&&u.classList.remove("visible","closing"),180)},50)},se=h=>{h.stopPropagation(),u.classList.contains("visible")?Q():X()},le=h=>{h.target.classList.contains("color-option")&&h.stopPropagation()};p.addEventListener("click",se),u.addEventListener("click",le),x.push({element:p,event:"click",handler:se},{element:u,event:"click",handler:le});const Ee=()=>clearTimeout(P),fe=()=>Q();u.addEventListener("mouseenter",Ee),u.addEventListener("mouseleave",fe),x.push({element:u,event:"mouseenter",handler:Ee},{element:u,event:"mouseleave",handler:fe});const Le=(h,L,v)=>{if(!h.target.closest(".color-palette, .done-button")){if(C.includes(e)&&C.length>1){uo(h);return}h.shiftKey?C.includes(e)||(C.push(e),e.classList.add("selected")):Ne(),h.preventDefault(),[document.body.style.userSelect,document.body.style.webkitUserSelect]=["none","none"],j?$=ie():ue.updateZIndex(e,ie()),[s,a]=[L,v],h.target.closest(".resize-handle")?[o,l,f]=[!0,e.offsetWidth,e.offsetHeight]:([r,c]=[b(e.style.left),b(e.style.top)],[e.dataset.originalX,e.dataset.originalY]=[r,c],d=setTimeout(()=>t=!0,150)),window.activeNote=e}},ae=h=>{if(!window.activeNote||window.activeNote!==e)return;const[L,v]=[h.clientX,h.clientY];if((Math.abs(L-s)>5||Math.abs(v-a)>5)&&(clearTimeout(d),!t&&!o&&(t=!0)),t){window.isDragInProgress||(window.isDragInProgress=!0,document.body.classList.add("drag-in-progress"));const k=5;let[V,de]=[Math.min(Math.max(r+L-s,-k),window.innerWidth-e.offsetWidth/4),Math.min(Math.max(c+v-a,-k),window.innerHeight-e.offsetHeight/4)];window.AnimationBatcher?window.AnimationBatcher.batchStyleUpdate(e,{left:`${V}px`,top:`${de}px`}):(e.style.left=`${V}px`,e.style.top=`${de}px`),Ke(),Nt(L,v)}if(o){const[k,V]=[150,150],[de,_e]=[window.innerWidth-b(e.style.left)+50,window.innerHeight-b(e.style.top)+50],et=Math.min(Math.max(l+L-s,k),de),tt=Math.min(Math.max(f+v-a,V),_e);window.AnimationBatcher?window.AnimationBatcher.batchStyleUpdate(e,{width:`${et}px`,height:`${tt}px`}):(e.style.width=`${et}px`,e.style.height=`${tt}px`)}},Ae=h=>{if(clearTimeout(d),[document.body.style.userSelect,document.body.style.webkitUserSelect]=["",""],t||o){if(t&&(Be(),!Dt().moved)){G(),Ct(e),To(e);const v=e.dataset.noteId||Fe();[e.dataset.noteId,e.dataset.repositioned]=[v,"true"],ze.add(v),oe[m]={x:b(e.style.left),y:b(e.style.top)},ne[m]=e.style.backgroundColor}window.DebouncedStorage.save(`${B}_board_${m}`,W()),window.isDragInProgress=!1,document.body.classList.remove("drag-in-progress")}t=!1,o=!1},Qe=h=>Le(h,h.clientX,h.clientY);if(e.addEventListener("mousedown",Qe),e._moveHandler=ae,e._endHandler=Ae,x.push({element:e,event:"mousedown",handler:Qe}),e._eventCleanup){const h=e._eventCleanup;e._eventCleanup=()=>{h(),x.forEach(({element:L,event:v,handler:k})=>{L.removeEventListener(v,k)}),document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",Ae),document.removeEventListener("mousemove",D)}}else e._eventCleanup=()=>{x.forEach(({element:h,event:L,handler:v})=>{h.removeEventListener(L,v)}),document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",Ae),document.removeEventListener("mousemove",D)}}function ko(){w(".color-palette").forEach(e=>{e.style.display!=="none"&&(e.classList.add("closing"),setTimeout(()=>{e.style.display="none",e.classList.remove("closing")},200))}),gt=null}const Co=e=>{gt&&!e.target.closest(".color-button")&&ko()};document.addEventListener("click",Co);function To(e){if(!e)return;const[t,o,n,s]=[e.getBoundingClientRect(),window.innerHeight,250,150],a=o-s,[r,c]=[t.bottom>a,t.left<n&&t.bottom>a];if(c){const[l,f,d]=[t.bottom-a+20,b(e.style.top),Math.max(60,b(e.style.top)-(t.bottom-a+20))];e.style.transition="top 0.3s ease-out",e.style.top=`${d}px`,setTimeout(()=>e.style.transition="",300)}}function Nt(e,t){var u,g;if(Ye)return;const o=i(".status-bar");if(!o)return;const n=o.getBoundingClientRect(),[s,a]=[Math.max(0,Math.max(n.left-e,e-n.right)),Math.max(0,Math.max(n.top-t,t-n.bottom))],[r,c,l,f]=[Math.sqrt(s*s+a*a),120,80,I!==null],d=f?r<=c:r<=l,p=()=>{let[S,x]=[null,1/0];return w(".board-button:not(.disabled)",!0).forEach(Y=>{const y=Y.getBoundingClientRect(),E=Math.sqrt(Math.pow(e-(y.left+y.width/2),2)+Math.pow(t-(y.top+y.height/2),2));E<x&&([S,x]=[Y,E])}),S};if(d!==f)if(d){const S=w(".board-button:not(.disabled)");I=p(),S.forEach(x=>x.classList.add("drag-active","drag-proximity")),I&&I.classList.add("drag-hover"),$o()}else w(".board-button",!0).forEach(S=>{S.classList.remove("drag-hover","drag-proximity"),setTimeout(()=>S.classList.remove("drag-active"),200)}),I=null,Mt();else if(d&&I){const S=p();S!==I&&(I==null||I.classList.remove("drag-hover"),I=S,S?(S.classList.add("drag-hover"),Be(),(u=i(".shortcut-hint"))==null||u.classList.add("hidden-during-drag")):(Ke(),ve||(g=i(".shortcut-hint"))==null||g.classList.remove("hidden-during-drag")))}}function $o(){if(!I)return;const e=window.activeNote||ht,[t,o]=[I.getBoundingClientRect(),C.length>0?C:e?[e]:[]];o.forEach(n=>{if(n&&!n.classList.contains("reverse-animating")&&!n.classList.contains("hover-animating")){n.querySelectorAll("textarea, [contenteditable]").forEach(l=>{[l.style.userSelect,l.style.pointerEvents]=["none","none"]});const[s,a]=[n.getBoundingClientRect(),n.closest(".board").getBoundingClientRect()],[r,c]=[t.left-a.left+t.width/2-(s.left-a.left)-s.width/2,t.top-a.top+t.height/2-(s.top-a.top)-s.height/2];n.style.setProperty("--suckX",`${r}px`),n.style.setProperty("--suckY",`${c}px`),n.style.animation="noteSuckHover 0.3s ease-out forwards",n.classList.add("hover-animating")}})}function Mt(){w(".hover-animating",!0).forEach(e=>{e.querySelectorAll("textarea, [contenteditable]").forEach(t=>{t.style.removeProperty("user-select"),t.style.removeProperty("pointer-events")}),e.style.animation="noteSuckReverse 0.3s ease-out forwards",e.classList.remove("hover-animating"),e.classList.add("reverse-animating"),setTimeout(()=>{e.classList.contains("reverse-animating")&&([e.style.animation]=["none"],e.style.removeProperty("--suckX"),e.style.removeProperty("--suckY"),e.classList.remove("reverse-animating"))},300)})}function Ke(){var e;if(T>1&&!ve&&!I){const t=document.getElementById("dragTransferMessage");t&&(t.classList.add("visible"),ve=!0),(e=i(".shortcut-hint"))==null||e.classList.add("hidden-during-drag")}}function Be(){var e;if(ve){const t=document.getElementById("dragTransferMessage");t&&(t.classList.remove("visible"),ve=!1),(e=i(".shortcut-hint"))==null||e.classList.remove("hidden-during-drag")}}function Bt(){w(".board-button",!0).forEach(e=>e.classList.remove("drag-hover","drag-proximity")),[I]=[null],Mt(),Be()}function Dt(){if(!I)return{moved:!1};const e=window.activeNote||ht,[t,o]=[parseInt(I.dataset.boardId),C.length>0?[...C]:[e]];if(t===m)return o.forEach(s=>{if(s){const a=ee==null?void 0:ee.find(r=>r.element===s);a?(s.style.left=`${a.x}px`,s.style.top=`${Math.max(60,a.y)}px`):s.style.top=`${parseInt(s.style.top||0)-250}px`}}),{moved:!1};let n=new Map;return o.length>1&&typeof ee!="undefined"&&ee.length>0&&ee.forEach(s=>{s&&o.includes(s.element)&&n.set(s.element,{originalX:s.x,originalY:s.y})}),o.forEach(s=>{s&&Io(s,t,n.size>0?n.get(s):null)}),C.length>0&&Ne(),{moved:!0}}function Io(e,t,o=null){const n=e.style.left;if(e.classList.contains("hover-animating"))e.style.animation="noteSuckComplete 0.3s ease-in forwards",e.classList.remove("hover-animating");else{const s=i(`.board-button[data-board-id="${t}"]`);if(!s)return;const[a,r,c]=[s.getBoundingClientRect(),e.getBoundingClientRect(),e.closest(".board").getBoundingClientRect()],[l,f]=[a.left-c.left+a.width/2-(r.left-c.left)-r.width/2,a.top-c.top+a.height/2-(r.top-c.top)-r.height/2];e.style.setProperty("--suckX",`${l}px`),e.style.setProperty("--suckY",`${f}px`),e.style.animation="noteSuckHover 0.3s ease-out forwards",e.classList.add("hover-animating")}setTimeout(()=>{e.classList.contains("hover-animating")&&(e.style.animation="noteSuckComplete 0.3s ease-in forwards",e.classList.remove("hover-animating"))},300),setTimeout(()=>{e.querySelectorAll("textarea, [contenteditable]").forEach(a=>{a.style.removeProperty("user-select"),a.style.removeProperty("pointer-events")}),e.remove();const s=i(`.board[data-board-id="${t}"]`);if(s){if(e.style.animation="",e.style.removeProperty("--suckX"),e.style.removeProperty("--suckY"),o)if(o.originalX!==void 0&&o.originalY!==void 0)[e.style.left,e.style.top]=[`${o.originalX}px`,`${Math.max(60,o.originalY)}px`];else{const[c,l]=[100,80];[e.style.left,e.style.top]=[`${c+(o.offsetX||0)}px`,`${Math.max(60,l+(o.offsetY||0))}px`]}else{const[c,l]=[parseFloat(e.dataset.originalX),parseFloat(e.dataset.originalY)];!isNaN(c)&&!isNaN(l)?[e.style.left,e.style.top]=[`${c}px`,`${Math.max(60,l)}px`]:[e.style.left,e.style.top]=[n,"80px"]}const a=e.dataset.noteId||Fe();[e.dataset.noteId,e.dataset.repositioned,e.dataset.transferred]=[a,"true","true"],ze.add(a),s.appendChild(e),e.style.animation="paperPop 0.3s ease-out forwards",K(),Bt(),Ye=!0,setTimeout(()=>Ye=!1,500);const r=m;[m]=[t],window.DebouncedStorage.saveHigh(`${B}_board_${m}`,W()),[m]=[r],window.DebouncedStorage.saveHigh(`${B}_board_${m}`,W())}},600)}let _={},U=null,xe={x:0,y:0},q=[];function At(){Do(),Rt(),Mo(),w(".emoji-item").forEach(e=>{e.addEventListener("click",_t)})}const _t=e=>{const t=e.target.dataset.emoji;t&&(Bo(t),No(t))};function No(e){const t=i(".board.active");if(!t)return;const o=t.dataset.boardId;if(_o(o)>=10)return jo();const n=Oo(),s=t.getBoundingClientRect(),[a,r,c]=[s.width-120,s.height*.8-120,20],[l,f]=[Math.random()*a,Math.max(c,Math.random()*r)],d=Object.assign(document.createElement("div"),{className:"emoji-sticker new",textContent:e});d.dataset.stickerId=n,Object.assign(d.style,{left:l+"px",top:f+"px"});const p=Object.assign(document.createElement("button"),{className:"delete-button",textContent:"\xD7"});p.addEventListener("click",u=>[u.stopPropagation(),Ht(n,o)]),d.appendChild(p),jt(d),t.appendChild(d),(_[o]=_[o]||{})[n]={emoji:e,x:l,y:f,id:n},Ze(o),setTimeout(()=>d.classList.remove("new"),400)}function jt(e){let t=!1;e.addEventListener("mousedown",o);function o(a){if(a.target.classList.contains("delete-button"))return;a.preventDefault(),a.stopPropagation(),[t,U]=[!0,e],Object.assign(document.body.style,{userSelect:"none",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none"}),[document.onselectstart,document.ondragstart]=[()=>!1,()=>!1];const[r,c]=[a.clientX,a.clientY],l=e.getBoundingClientRect();[xe.x,xe.y]=[r-l.left,c-l.top],e.classList.add("dragging"),document.addEventListener("mousemove",n),document.addEventListener("mouseup",s)}function n(a){if(!t||!U)return;a.preventDefault(),a.stopPropagation();const[r,c]=[a.clientX,a.clientY],l=i(".board.active").getBoundingClientRect(),[f,d]=[Math.max(0,Math.min(r-l.left-xe.x,l.width-120)),Math.max(0,Math.min(c-l.top-xe.y,l.height-120))];window.AnimationUtils?window.AnimationUtils.updatePosition(U,f,d):Object.assign(U.style,{left:f+"px",top:d+"px"})}function s(){var c;if(!t||!U)return;U.classList.remove("dragging"),Object.assign(document.body.style,{userSelect:"",webkitUserSelect:"",mozUserSelect:"",msUserSelect:""}),[document.onselectstart,document.ondragstart]=[null,null],Ho(U);const[a,r]=[i(".board.active").dataset.boardId,U.dataset.stickerId];(c=_[a])!=null&&c[r]&&(Object.assign(_[a][r],{x:parseInt(U.style.left),y:parseInt(U.style.top)}),Ze(a)),U=null,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",s)}}const Ht=(e,t)=>{const o=i(`[data-sticker-id="${e}"]`);o&&(o.classList.add("deleting"),setTimeout(()=>o.remove(),500)),_[t]&&(delete _[t][e],Ze(t))},Ze=e=>{window.DebouncedStorage.save(`emojiStickers_board_${e}`,_[e]||{})};function Ot(e){const t=localStorage.getItem(`emojiStickers_board_${e}`);try{_[e]=t?JSON.parse(t):{},t&&Pt(e)}catch(o){console.error("Error loading emoji stickers:",o),_[e]={}}}const Mo=()=>Array.from({length:T},(e,t)=>Ot(t+1));function Pt(e){const t=i(`.board[data-board-id="${e}"]`);!t||!_[e]||(Array.from(t.querySelectorAll(".emoji-sticker")).forEach(o=>o.remove()),Object.values(_[e]).forEach(({id:o,emoji:n,x:s,y:a})=>{const r=Object.assign(document.createElement("div"),{className:"emoji-sticker",textContent:n});r.dataset.stickerId=o,Object.assign(r.style,{left:s+"px",top:a+"px"});const c=Object.assign(document.createElement("button"),{className:"delete-button",textContent:"\xD7"});c.addEventListener("click",l=>[l.stopPropagation(),Ht(o,e)]),r.appendChild(c),jt(r),t.appendChild(r)}))}function Bo(e){const t=q.indexOf(e);(t<0||t>=12)&&(t>-1&&q.splice(t,1),q.unshift(e),q.length>16&&(q=q.slice(0,16)),Ao(),Rt())}function Do(){const e=localStorage.getItem("emojiUsageOrder");try{q=e?JSON.parse(e):[]}catch(t){console.error("Error loading emoji usage order:",t),q=[]}}const Ao=()=>localStorage.setItem("emojiUsageOrder",JSON.stringify(q));function Rt(){const e=i(".emoji-picker");e&&(Array.from(e.querySelectorAll(".recent-emoji")).forEach(t=>t.remove()),q.length>0&&q.slice(0,12).reverse().forEach(t=>{const o=Object.assign(document.createElement("div"),{className:"emoji-item recent-emoji",textContent:t});o.dataset.emoji=t,o.addEventListener("click",_t),e.insertBefore(o,e.firstChild)}))}const _o=e=>_[e]?Object.keys(_[e]).length:0,jo=()=>{const e=document.getElementById("emojiLimitMessage");e&&(e.classList.add("visible"),setTimeout(()=>e.classList.remove("visible"),1e3))};function Ho(e){if(!e)return;const[t,o]=[e.getBoundingClientRect(),window.innerHeight],[n,s,a]=[250,150,o-150];if(t.left<n&&t.bottom>a){const c=Math.max(60,parseInt(e.style.top)-(t.bottom-a+20));e.style.top=`${c}px`}}const Oo=()=>"emoji_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),Po=e=>[localStorage.removeItem(`emojiStickers_board_${e}`),delete _[e]];document.addEventListener("DOMContentLoaded",()=>setTimeout(At,100));window.emojiStickers={loadEmojiStickers:Ot,renderEmojiStickers:Pt,cleanupEmojiStickers:Po,initializeEmojiPicker:At};const De=()=>new Date,Yt=e=>{const t=De().getDay(),o=t===0?6:t-1;return e===o},Ro=e=>{const t=`daysPatternStartDate_${e}`;localStorage.getItem(t)||localStorage.setItem(t,De().toISOString().split("T")[0])},Je=e=>{const t=localStorage.getItem(`daysPatternStartDate_${e}`);return t?Math.floor((De()-new Date(t))/(1e3*60*60*24))%5:-1},Xt=e=>localStorage.removeItem(`daysPatternStartDate_${e}`),ut=()=>{if(T>=ye){alert(`Maximum number of boards (${ye}) reached.`);return}Xe(++T),bt(),$e()};function Xe(e){const t=i(".boards-container"),o=Object.assign(document.createElement("div"),{className:"board"});o.dataset.boardId=e,t.appendChild(o);const n=Object.assign(document.createElement("div"),{className:"board-title-circle"}),s=[],a=()=>{var u;(u=te(n,".board-title-input"))==null||u.focus()};n.addEventListener("click",a),s.push({element:n,event:"click",handler:a});const r=Object.assign(document.createElement("input"),{type:"text",className:"board-title-input",placeholder:"Title...",maxLength:30});let c;const l=()=>{const u=r.value.trim();if(!u){r.value=r.dataset.originalTitle||"";return}Ve(e,u),Ie(r)},f=()=>{clearTimeout(c),c=setTimeout(l,500)};r.addEventListener("input",f),s.push({element:r,event:"input",handler:f}),Ie(r),n.appendChild(r),o.appendChild(n);const d=Object.assign(document.createElement("div"),{className:"board-button new-button",textContent:e});d.dataset.boardId=e;const p=()=>F(e);if(d.addEventListener("click",p),s.push({element:d,event:"click",handler:p}),e>1){const u=Object.assign(document.createElement("div"),{className:"delete-board",textContent:"\xD7"}),g=S=>{S.stopPropagation(),Ce(e)};u.addEventListener("click",g),s.push({element:u,event:"click",handler:g}),d.appendChild(u)}o._eventCleanup=()=>{s.forEach(({element:u,event:g,handler:S})=>{u.removeEventListener(g,S)}),clearTimeout(c)},i(".boards-navigation").insertBefore(d,i(".add-board-button")),setTimeout(()=>[d.classList.remove("new-button"),d.classList.add("transitions-ready")],500),we(e),Ge(e),window.emojiStickers&&window.emojiStickers.loadEmojiStickers(e)}function Ce(e){if(!confirm(`Are you sure you want to delete board ${e}?`))return;const t=i(`.board[data-board-id="${e}"]`);if(!t){Pe(e);return}const[o,n]=[Array.from(t.querySelectorAll(".sticky-note")),Array.from(t.querySelectorAll(".emoji-sticker"))];if(o.length||n.length){const s=i(".trash-bin"),a=s.getBoundingClientRect();s.style.animation="binShake 0.5s ease-in-out",o.forEach(r=>{const c=te(r,".sticky-content");A.unshift({text:c.innerHTML,color:r.style.backgroundColor,x:r.style.left,y:r.style.top,width:r.style.width,height:r.style.height,timestamp:new Date().toLocaleString(),isBold:c.classList.contains("bold")});const l=r.getBoundingClientRect(),[f,d]=[a.left-l.left+a.width/2-l.width/2,a.top-l.top];r.style.setProperty("--throwX",`${f}px`),r.style.setProperty("--throwY",`${d}px`),r.style.animation="paperCrumble 0.5s ease-in forwards"}),n.forEach(r=>r.classList.add("deleting")),window.DebouncedStorage.saveLow(Se,A),me(),console.log("Setting timeout for continueWithBoardDeletion, boardId:",e),setTimeout(()=>{console.log("Timeout fired, calling continueWithBoardDeletion"),Pe(e)},600)}else Pe(e)}function Pe(e){console.log("continueWithBoardDeletion called with boardId:",e);const[t,o]=[i(`.board[data-board-id="${e}"]`),i(`.board-button[data-board-id="${e}"]`)];console.log("Found elements:",{boardElement:t,buttonElement:o}),t!=null&&t._eventCleanup&&t._eventCleanup(),t&&t.remove(),o&&o.classList.add("removing");const n=[];for(let s=e+1;s<=T;s++){const a=i(`.board-button[data-board-id="${s}"]`);a&&(a.classList.add("removing"),n.push(s))}[`${B}_board_${e}`,`stickyNotes_boardTitle_${e}`,`boardColor_${e}`,`boardPattern_${e}`,`boardStyles_board_${e}`].forEach(s=>localStorage.removeItem(s)),Xt(e),window.emojiStickers&&window.emojiStickers.cleanupEmojiStickers(e);for(let s=e+1;s<=T;s++)["boardColor","boardPattern","boardStyles_board"].forEach(a=>{const[r,c,l]=[`${a}_${s}`,`${a}_${s-1}`,localStorage.getItem(`${a}_${s}`)];l&&localStorage.setItem(c,l),localStorage.removeItem(r)});setTimeout(()=>{o&&o.remove();const[s,a]=[i(".boards-navigation"),i(".add-board-button")];n.forEach(r=>{const[c,l,f]=[i(`.board-button[data-board-id="${r}"]`),i(`.board[data-board-id="${r}"]`),r-1];c&&c.remove(),l&&(l.dataset.boardId=f);const d=Object.assign(document.createElement("div"),{className:"board-button new-button",textContent:f});if([d.dataset.boardId,d.dataset.originalNumber]=[f,f],d.addEventListener("click",()=>F(f)),f>1){const p=Object.assign(document.createElement("div"),{className:"delete-board",textContent:"\xD7"});p.addEventListener("click",u=>{u.stopPropagation(),Ce(f)}),d.appendChild(p)}s.insertBefore(d,a),["","Title","Color","Pattern"].forEach(p=>{const[u,g,S]=[p?`stickyNotes_board${p}`:B,`${p?`stickyNotes_board${p}`:B}_board_${r}`,`${p?`stickyNotes_board${p}`:B}_board_${f}`],x=localStorage.getItem(g);x&&(localStorage.setItem(S,x),localStorage.removeItem(g))}),we(f)}),setTimeout(()=>w(".board-button.new-button").forEach(r=>[r.classList.remove("new-button"),r.classList.add("transitions-ready")]),500),T--,bt(),$e(),m===e?F(e>1?e-1:T>=1?1:null):m>e&&(m--,F(m)),i(".trash-bin").style.animation=""},350)}function F(e){const t=parseInt(e);t===m||t===null||(qo(),document.body.classList.add("board-switching"),setTimeout(()=>document.body.classList.remove("board-switching"),300),m=t,oe[e]||(oe[e]={x:window.innerWidth/2-100,y:window.innerHeight/2-75}),ne[e]||(ne[e]=pe[0]),w(".board").forEach(o=>{const n=parseInt(o.dataset.boardId);if(o.classList.remove("active","prev","next"),o.style.visibility="hidden",n===m){if(o.classList.add("active"),o.style.visibility="visible",Array.from(o.querySelectorAll(".sticky-note")).forEach((s,a)=>s.style.setProperty("--note-index",a)),Array.from(o.querySelectorAll(".emoji-sticker")).forEach((s,a)=>s.style.setProperty("--sticker-index",a)),!te(o,".board-title-circle")){const s=Object.assign(document.createElement("div"),{className:"board-title-circle"});s.setAttribute("onclick","$within(this, '.board-title-input').focus()");const a=Object.assign(document.createElement("input"),{type:"text",className:"board-title-input",placeholder:"Title...",maxLength:30}),r=()=>Ve(n,a.value);["change","blur"].forEach(c=>a.addEventListener(c,r)),s.appendChild(a),o.appendChild(s),Ge(n)}}else o.classList.add(n<m?"prev":"next")}),w(".board-button").forEach(o=>o.classList.toggle("active",parseInt(o.dataset.boardId)===m)),we(m),qt(),w(".board-pattern-option, .pattern-preview").forEach(o=>o.style.backgroundColor=M.colors.current),K(),window.emojiStickers&&window.emojiStickers.renderEmojiStickers(m),setTimeout(()=>zt(m),300))}let Te=[];function Yo(){Xo();const e=ut;i(".add-board-button").addEventListener("click",e),Te.push({element:i(".add-board-button"),event:"click",handler:e}),w(".board-button").forEach(o=>{const[n,s]=[parseInt(o.dataset.boardId),o.cloneNode(!0)],a=()=>F(n);s.addEventListener("click",a);const r=te(s,".delete-board");if(r){const c=l=>{l.stopPropagation(),Ce(n)};r.addEventListener("click",c)}o.parentNode.replaceChild(s,o)});const t=o=>{const[n,s]=[o.target.tagName,o.target.getAttribute("contenteditable")==="true"];if((o.key==="Control"||o.key==="Meta")&&!o.altKey&&!o.shiftKey&&n!=="TEXTAREA"&&!s){o.preventDefault(),i(".note-input textarea").focus();return}if(n==="TEXTAREA"||s){(o.metaKey||o.ctrlKey)&&o.key==="Enter"&&(o.preventDefault(),We());return}o.key==="ArrowLeft"&&m>1?F(m-1):o.key==="ArrowRight"&&m<T?F(m+1):o.key==="n"&&o.ctrlKey?(o.preventDefault(),ut()):o.key==="d"&&o.ctrlKey&&m>1&&(o.preventDefault(),Ce(m));const a=parseInt(o.key);!isNaN(a)&&a>=1&&a<=9&&a<=T&&F(a)};document.addEventListener("keydown",t),Te.push({element:document,event:"keydown",handler:t})}function Xo(){Te.forEach(({element:e,event:t,handler:o})=>{e.removeEventListener(t,o)}),Te=[]}function $e(){const e=i(".add-board-button"),t=T>=ye;e.classList.toggle("disabled",t),e.title=t?`Maximum number of boards (${ye}) reached`:"Add new board",Uo()}function Uo(){const e=i(".shortcut-hint");e&&(e.style.display=T>=2?"block":"none")}let mt=!1;function qo(){if(mt||T<2)return;const e=i(".shortcut-hint");e&&(mt=!0,e.classList.add("auto-show"),setTimeout(()=>{e.classList.remove("auto-show")},4e3))}function zo(){const e=i(".board-style-menu"),t=e.classList.contains("visible");t||(qt(),Ut(),document.querySelectorAll(".board-pattern-option, .pattern-preview").forEach(o=>o.style.backgroundColor=M.colors.current),e.offsetWidth),e.classList.toggle("visible",!t),e.classList.toggle("closing",t),t&&setTimeout(()=>e.classList.remove("closing"),300)}function Ut(){i(".board-color-option.initialized")||document.querySelectorAll(".board-color-option, .board-pattern-option").forEach(e=>{e.classList.add("initialized");const t=e.classList.contains("board-color-option")?"color":"pattern",o=e.getAttribute(`data-${t}`);e.addEventListener("click",()=>{t==="color"?Fo(o):Ko(o),document.querySelectorAll(`.board-${t}-option`).forEach(n=>n.classList.remove("active")),e.classList.add("active")})})}function qt(){["color","pattern"].forEach(e=>{w(`.board-${e}-option`).forEach(t=>{t.classList.toggle("active",t.getAttribute(`data-${e}`)===M[`${e}s`].current)})})}function Ue(){return i(".board.active")}function Fo(e){M.colors.current=e;const t=Ue();t.style.backgroundColor=e,document.querySelectorAll(".pattern-preview, .board-pattern-option").forEach(o=>{o.style.backgroundColor=e,o.classList.contains("board-pattern-option")&&(o.style.opacity="0.8")}),vt(),K(),t.style.transition="background-color 0.5s ease",setTimeout(()=>t.style.transition="",500)}function Wo(e){const t=Object.assign(document.createElement("div"),{style:"position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; transition:opacity 0.3s ease-out; opacity:0;"}),o=i(`.board[data-board-id="${m}"]`);if(e!=="none"){const n={dots:"background-image:radial-gradient(rgba(255,255,255,0.4) 1px, transparent 1px); background-size:20px 20px;",grid:"background-image:linear-gradient(rgba(255,255,255,0.4) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.4) 1px, transparent 1px); background-size:20px 20px;",lines:"background-image:linear-gradient(0deg, transparent 19px, rgba(255,255,255,0.4) 20px); background-size:20px 20px;"};if(n[e])t.style.cssText+=n[e];else if(e==="weekdays"||e==="days"){const s=Object.assign(document.createElement("div"),{className:e==="weekdays"?"weekday-header":"day-header"});(e==="weekdays"?["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]:["Day 1","Day 2","Day 3","Day 4","Day 5"]).forEach((r,c)=>{const l=Object.assign(document.createElement("span"),{textContent:r});(e==="weekdays"&&Yt(c)||e==="days"&&Je(m)===c)&&l.classList.add("current-day"),s.appendChild(l)}),t.appendChild(s),o==null||o.classList.add("has-header")}}else o==null||o.classList.remove("has-header");return t}function Ko(e){const[t,o,n]=[Ue(),Ue().dataset.boardId,M.patterns.current];n==="days"&&e!=="days"&&Xt(o),M.patterns.current=e,t.querySelectorAll(".pattern-overlay, .lines-overlay, .weekday-header, .day-header").forEach(r=>r.remove()),t.classList.remove("board-pattern-dots","board-pattern-grid","board-pattern-lines","board-pattern-weekdays","board-pattern-days"),Array.from(t.children).forEach(r=>{r.tagName==="DIV"&&r.style.position==="absolute"&&r.style.pointerEvents==="none"&&(r.style.zIndex==="0"||r.style.zIndex==="1"||r.style.top==="0px"||r.style.left==="0px")&&r.remove()}),e==="days"&&Ro(o);const s=Wo(e);t.appendChild(s);let a=null;(e==="weekdays"||e==="days")&&(a=Object.assign(document.createElement("div"),{className:`lines-overlay lines-overlay-${e}`,style:"position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0; opacity:0; transition:opacity 0.3s ease;"}),t.appendChild(a)),s.offsetWidth,requestAnimationFrame(()=>{s.style.opacity="1",a&&(a.style.opacity="1")}),s.addEventListener("transitionend",()=>{e==="weekdays"||e==="days"?(t.classList.add(`board-pattern-${e}`),s.classList.add("pattern-overlay"),a&&a.classList.add("pattern-overlay")):e!=="none"&&t.classList.add(`board-pattern-${e}`),K()},{once:!0}),vt()}function Zo(e,t){if(e.style.backgroundColor=t.color,e.querySelectorAll(".pattern-overlay, .lines-overlay").forEach(o=>o.remove()),e.classList.remove("board-pattern-dots","board-pattern-grid","board-pattern-lines","board-pattern-weekdays","board-pattern-days"),t.pattern!=="none"&&(e.classList.add(`board-pattern-${t.pattern}`),t.pattern==="weekdays"||t.pattern==="days")){const o=Object.assign(document.createElement("div"),{className:`pattern-overlay ${t.pattern==="weekdays"?"weekday-header":"day-header"}`});(t.pattern==="weekdays"?["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]:Array.from({length:5},(a,r)=>`Day ${r+1}`)).forEach((a,r)=>{const c=Object.assign(document.createElement("span"),{textContent:a});(t.pattern==="weekdays"&&Yt(r)||t.pattern==="days"&&Je(parseInt(e.dataset.boardId))===r)&&c.classList.add("current-day"),o.appendChild(c)}),e.appendChild(o);const s=Object.assign(document.createElement("div"),{className:`pattern-overlay lines-overlay lines-overlay-${t.pattern}`,style:"position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;"});e.appendChild(s)}}function we(e){const t=localStorage.getItem(`boardStyles_board_${e}`),o=i(`.board[data-board-id="${e}"]`);if(!o)return;let n;t?(n=JSON.parse(t),e===m&&(M.colors.current=n.color,M.patterns.current=n.pattern)):(n={color:M.colors.default,pattern:M.patterns.default},e===m&&(M.colors.current=n.color,M.patterns.current=n.pattern)),Zo(o,n),K()}Jo();document.addEventListener("click",function(e){const t=i(".board-style-menu"),o=i(".board-style-button");t&&t.classList.contains("visible")&&o&&!o.contains(e.target)&&!t.contains(e.target)&&(t.classList.add("closing"),t.classList.remove("visible"),setTimeout(()=>t.classList.remove("closing"),300))});document.querySelector(".board-style-menu").addEventListener("click",e=>e.stopPropagation());function Jo(){document.querySelectorAll(".board").forEach(e=>Ge(e.dataset.boardId))}function Ve(e,t){localStorage.setItem(`stickyNotes_boardTitle_${e}`,t);const o=i(`.board-button[data-board-id="${e}"]`);o&&!o.dataset.originalNumber&&(o.dataset.originalNumber=o.textContent)}function Ie(e){e.setAttribute("data-counter",`${e.value.length}/${e.maxLength}`)}function Ge(e){const t=localStorage.getItem(`stickyNotes_boardTitle_${e}`),o=i(`.board[data-board-id="${e}"]`);if(o){const s=o.querySelector(".board-title-input");s&&t&&(s.value=t)}const n=i(`.board-button[data-board-id="${e}"]`);n&&!n.dataset.originalNumber&&(n.dataset.originalNumber=n.textContent)}function zt(e){const t=i(`.board[data-board-id="${e}"] .board-title-circle`);t&&(t.classList.add("show-temporary"),setTimeout(()=>t.classList.remove("show-temporary"),3e3))}function Vo(){w(".board-title-circle").forEach(e=>{let t;const[o,n]=[e.querySelector(".board-title-input"),e.closest(".board").dataset.boardId];if(["mouseenter","mouseleave","click"].forEach((s,a)=>{e.addEventListener(s,()=>{a===0?(o&&o.focus(),clearTimeout(t),e.classList.add("delayed-close")):a===1?(t=setTimeout(()=>e.classList.remove("delayed-close"),2e3),o&&o.blur()):o&&o.focus()})}),o){let s;const a=()=>{const r=o.value.trim();if(!r){o.dataset.originalTitle="";return}Ve(n,r),Ie(o)};o.addEventListener("input",()=>{clearTimeout(s),s=setTimeout(a,500)}),Ie(o)}})}const K=()=>{for(let e=1;e<=T;e++){const[t,o]=[i(`.board[data-board-id="${e}"]`),i(`.board-button[data-board-id="${e}"]`)];if(!t||!o)continue;const n=t.style.backgroundColor||M.colors.default;o.classList.toggle("has-notes",t.querySelectorAll(".sticky-note").length>0),o.style.backgroundColor=n;const s=["board-pattern-dots","board-pattern-grid","board-pattern-lines","board-pattern-weekdays","board-pattern-days"],a=s.find(c=>t.classList.contains(c));s.forEach(c=>o.classList.remove(c.replace("board-pattern","button-pattern"))),a&&o.classList.add(a.replace("board-pattern","button-pattern"));const r=to(n)||{r:26,g:26,b:26};o.style.color=(r.r*299+r.g*587+r.b*114)/1e3>128?"#000":"#fff"}};function Go(e){e.forEach(({selector:t,event:o,handler:n})=>{const s=i(t);s&&s.addEventListener(o,n)})}const Qo=function(){so(),Et(),St(),Yo(),Ut(),ao(),It(),Vo(),en(),setTimeout(()=>zt(m),500),tn(),Go([{selector:".board-style-button",event:"click",handler:zo},{selector:".trash-bin",event:"click",handler:be},{selector:"#trashModal .close-modal-btn",event:"click",handler:be},{selector:"#trashModal .clear-trash-btn",event:"click",handler:Tt}])};document.addEventListener("DOMContentLoaded",Qo);function en(){const e=s=>{const a=s.selectionStart,r=s.value;if(r.length>0){const c=r.charAt(0).toUpperCase()+r.slice(1);c!==r&&(s.value=c,s.setSelectionRange(a,a))}},t=s=>{["input","keyup"].forEach(r=>{s.addEventListener(r,c=>e(c.target))});const a=r=>setTimeout(()=>e(r.target),0);s.addEventListener("paste",a)};w(".board-title-input, .note-input textarea").forEach(t);const o=new MutationObserver(s=>{s.forEach(a=>{a.addedNodes.forEach(r=>{var c;r.nodeType===1&&((r.querySelectorAll?Array.from(r.querySelectorAll(".board-title-input")):[]).forEach(t),(c=r.classList)!=null&&c.contains("board-title-input")&&t(r))})})}),n=i(".boards-container");n&&o.observe(n,{childList:!0,subtree:!0})}function tn(){setTimeout(()=>{w(".board-button").forEach(e=>{e.classList.add("transitions-ready"),e.offsetHeight,requestAnimationFrame(()=>e.style.transform="scale(1)")})},100)}window.toggleBold=$t;window.markAsDone=qe;window.addNote=We;window.restoreNote=yo;window.changeNoteColor=wo;window.markAsDone=qe;window.toggleBold=$t;window.clearTrash=Tt;})();
